using DataLoading;

// Prints array as 28 x 28 picture (generated by ChatGPT)
void PrintPicture(int[] array)
{

    for (int i = 0; i < array.Length; i++)
    {
        Console.Write($"{array[i],3} "); // Each number is formatted to take up 3 spaces

        // After every 28 elements, print a newline
        if ((i + 1) % 28 == 0)
        {
            Console.WriteLine();
        }
    }

// Optional: Print a final newline if the array length is not a multiple of 28
    if (array.Length % 28 != 0)
    {
        Console.WriteLine();
    }
}

// using this for always finding the file (even from binary I hope)
string solutionRoot = AppDomain.CurrentDomain.BaseDirectory;
while (!Directory.Exists(Path.Combine(solutionRoot, "data")))
{
    solutionRoot = Directory.GetParent(solutionRoot).FullName;
}
string dataFilePath = Path.Combine(solutionRoot, "data", "fashion_mnist_train_vectors.csv");



DataLoader loader = new DataLoader(dataFilePath);

// reads one line
int[]picture = loader.GetPicBytes();
Console.WriteLine(picture.Length);
PrintPicture(picture);

    
// can't read whole file (read by line approach was selected)
try
{
    picture = loader.GetAllBytes();
    Console.WriteLine(picture.Length);
}
catch (ApplicationException e)
{
    Console.WriteLine(e.Message);
}

// reads second line
picture = loader.GetPicBytes();
Console.WriteLine(picture.Length); 
PrintPicture(picture);

loader.Dispose();



DataLoader loader2 = new DataLoader(dataFilePath, false);
int[] picture2;

// can't read one line (read whole file was selected in constructor)
try
{
    picture2 = loader2.GetPicBytes();
    Console.WriteLine(picture2.Length);
    PrintPicture(picture2);
}
catch (ApplicationException e)
{
    Console.WriteLine(e.Message);
}

// reads the whole dataset
picture2 = loader2.GetAllBytes();
Console.WriteLine(picture2.Length);


loader2.Dispose();
